<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@ngify/http/wx | ngify</title><meta name="description" content="Documentation for ngify"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">ngify</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">ngify</a></li><li><a href="_ngify_http_wx.html">@ngify/http/wx</a></li></ul><h1>Module @ngify/http/wx</h1></div><section class="tsd-panel tsd-typography"><a id="md:ngifyhttp" class="tsd-anchor"></a><h1><a href="#md:ngifyhttp">@ngify/http</a></h1><p><a href="https://www.npmjs.com/package/@ngify/http"><img src="https://img.shields.io/npm/v/@ngify/http/latest.svg" alt="version"></a>
<img src="https://github.com/ngify/ngify/workflows/Node.js%20CI/badge.svg" alt="Node.js CI">
<img src="https://img.shields.io/badge/License-MIT-blue.svg" alt="License">
<a href="https://www.codefactor.io/repository/github/ngify/ngify"><img src="https://www.codefactor.io/repository/github/ngify/ngify/badge" alt="CodeFactor"></a>
<a href="https://github.com/ngify/ngify/blob/main/packages/http/README.zh-CN.md"><img src="https://img.shields.io/static/v1?label=%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87&message=zh-CN&color=212121" alt="简体中文"></a></p>
<p>A reactive HTTP client in the form of <code>@angular/common/http</code>, offers the following major features:</p>
<ul>
<li>The ability to request <a href="https://angular.io/guide/http#typed-response">typed response objects</a>.</li>
<li>Streamlined <a href="https://angular.io/guide/http#error-handling">error handling</a>.</li>
<li>Request and response <a href="https://angular.io/guide/http#intercepting-requests-and-responses">interception</a>.</li>
<li>Default support but not limited to <code>XMLHttpRequest</code>, <code>Fetch API</code> and <code>WeChatMiniProgram</code>.</li>
</ul>
<a id="md:prerequisites" class="tsd-anchor"></a><h2><a href="#md:prerequisites">Prerequisites</a></h2><p>Before working with the <code>@ngify/http</code>, you should have a basic understanding of the following:</p>
<ul>
<li>JavaScript / TypeScript programming.</li>
<li>Usage of the HTTP protocol.</li>
<li><a href="https://rxjs.dev/guide/overview">RxJS</a> Observable techniques and operators. See the <a href="https://angular.io/guide/observables">Observables</a> guide.</li>
</ul>
<a id="md:api" class="tsd-anchor"></a><h2><a href="#md:api">API</a></h2><p>For the full API definition, please visit <a href="https://ngify.github.io/ngify/modules/_ngify_http.html">https://ngify.github.io/ngify</a>.</p>
<a id="md:install" class="tsd-anchor"></a><h2><a href="#md:install">Install</a></h2><pre><code class="language-bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> </span><span class="hl-2">@ngify/http</span>
</code><button>Copy</button></pre>
<a id="md:basic-usage" class="tsd-anchor"></a><h2><a href="#md:basic-usage">Basic usage</a></h2><pre><code class="language-ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HttpClient</span><span class="hl-1">, </span><span class="hl-4">HttpContext</span><span class="hl-1">, </span><span class="hl-4">HttpContextToken</span><span class="hl-1">, </span><span class="hl-4">HttpHeaders</span><span class="hl-1">, </span><span class="hl-4">HttpParams</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ngify/http&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">filter</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;rxjs&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">http</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HttpClient</span><span class="hl-1">();</span><br/><br/><span class="hl-4">http</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">&lt;{ </span><span class="hl-4">code</span><span class="hl-1">: </span><span class="hl-7">number</span><span class="hl-1">, </span><span class="hl-4">data</span><span class="hl-1">: </span><span class="hl-7">any</span><span class="hl-1">, </span><span class="hl-4">msg</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1"> }&gt;(</span><span class="hl-2">&#39;url&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;k=v&#39;</span><span class="hl-1">).</span><span class="hl-0">pipe</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-0">filter</span><span class="hl-1">(({ </span><span class="hl-4">code</span><span class="hl-1"> }) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">code</span><span class="hl-1"> === </span><span class="hl-8">0</span><span class="hl-1">)</span><br/><span class="hl-1">).</span><span class="hl-0">subscribe</span><span class="hl-1">(</span><span class="hl-4">res</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">res</span><span class="hl-1">));</span><br/><br/><span class="hl-4">http</span><span class="hl-1">.</span><span class="hl-0">post</span><span class="hl-1">(</span><span class="hl-2">&#39;url&#39;</span><span class="hl-1">, { </span><span class="hl-4">k:</span><span class="hl-1"> </span><span class="hl-2">&#39;v&#39;</span><span class="hl-1"> }).</span><span class="hl-0">subscribe</span><span class="hl-1">(</span><span class="hl-4">res</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">res</span><span class="hl-1">));</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">HTTP_CACHE_TOKEN</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HttpContextToken</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-8">1800000</span><span class="hl-1">);</span><br/><br/><span class="hl-4">http</span><span class="hl-1">.</span><span class="hl-0">put</span><span class="hl-1">(</span><span class="hl-2">&#39;url&#39;</span><span class="hl-1">, </span><span class="hl-5">null</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">context:</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HttpContext</span><span class="hl-1">().</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-6">HTTP_CACHE_TOKEN</span><span class="hl-1">)</span><br/><span class="hl-1">}).</span><span class="hl-0">subscribe</span><span class="hl-1">(</span><span class="hl-4">res</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">res</span><span class="hl-1">));</span><br/><br/><span class="hl-4">http</span><span class="hl-1">.</span><span class="hl-0">patch</span><span class="hl-1">(</span><span class="hl-2">&#39;url&#39;</span><span class="hl-1">, </span><span class="hl-5">null</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">params:</span><span class="hl-1"> { </span><span class="hl-4">k:</span><span class="hl-1"> </span><span class="hl-2">&#39;v&#39;</span><span class="hl-1"> }</span><br/><span class="hl-1">}).</span><span class="hl-0">subscribe</span><span class="hl-1">(</span><span class="hl-4">res</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">res</span><span class="hl-1">));</span><br/><br/><span class="hl-4">http</span><span class="hl-1">.</span><span class="hl-0">delete</span><span class="hl-1">(</span><span class="hl-2">&#39;url&#39;</span><span class="hl-1">, </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HttpParams</span><span class="hl-1">(</span><span class="hl-2">&#39;k=v&#39;</span><span class="hl-1">), {</span><br/><span class="hl-1">  </span><span class="hl-4">headers:</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HttpHeaders</span><span class="hl-1">({ </span><span class="hl-4">Authorization:</span><span class="hl-1"> </span><span class="hl-2">&#39;token&#39;</span><span class="hl-1"> })</span><br/><span class="hl-1">}).</span><span class="hl-0">subscribe</span><span class="hl-1">(</span><span class="hl-4">res</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">res</span><span class="hl-1">));</span>
</code><button>Copy</button></pre>
<a id="md:intercepting-requests-and-responses" class="tsd-anchor"></a><h2><a href="#md:intercepting-requests-and-responses">Intercepting requests and responses</a></h2><p>With interception, you declare interceptors that inspect and transform HTTP requests from your application to a server. The same interceptors can also inspect and transform a server&#39;s responses on their way back to the application. Multiple interceptors form a forward-and-backward chain of request/response handlers.</p>
<blockquote>
<p><code>@ngify/http</code> applies interceptors in the order that you provide them。</p>
</blockquote>
<pre><code class="language-ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HttpClient</span><span class="hl-1">, </span><span class="hl-4">HttpHandler</span><span class="hl-1">, </span><span class="hl-4">HttpRequest</span><span class="hl-1">, </span><span class="hl-4">HttpEvent</span><span class="hl-1">, </span><span class="hl-4">HttpInterceptor</span><span class="hl-1">, </span><span class="hl-4">HttpEventType</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ngify/http&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Observable</span><span class="hl-1">, </span><span class="hl-4">tap</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;rxjs&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">http</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HttpClient</span><span class="hl-1">([</span><br/><span class="hl-1">  </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-5">class</span><span class="hl-1"> </span><span class="hl-5">implements</span><span class="hl-1"> </span><span class="hl-7">HttpInterceptor</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">intercept</span><span class="hl-1">(</span><span class="hl-4">request</span><span class="hl-1">: </span><span class="hl-7">HttpRequest</span><span class="hl-1">&lt;</span><span class="hl-7">unknown</span><span class="hl-1">&gt;, </span><span class="hl-4">next</span><span class="hl-1">: </span><span class="hl-7">HttpHandler</span><span class="hl-1">): </span><span class="hl-7">Observable</span><span class="hl-1">&lt;</span><span class="hl-7">HttpEvent</span><span class="hl-1">&lt;</span><span class="hl-7">unknown</span><span class="hl-1">&gt;&gt; {</span><br/><span class="hl-1">      </span><span class="hl-9">// Clone the request to modify request parameters</span><br/><span class="hl-1">      </span><span class="hl-4">request</span><span class="hl-1"> = </span><span class="hl-4">request</span><span class="hl-1">.</span><span class="hl-0">clone</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-4">headers:</span><span class="hl-1"> </span><span class="hl-4">request</span><span class="hl-1">.</span><span class="hl-4">headers</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-2">&#39;Authorization&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;token&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      });</span><br/><br/><span class="hl-1">      </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">next</span><span class="hl-1">.</span><span class="hl-0">handle</span><span class="hl-1">(</span><span class="hl-4">request</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-0">intercept</span><span class="hl-1">(</span><span class="hl-4">request</span><span class="hl-1">: </span><span class="hl-7">HttpRequest</span><span class="hl-1">&lt;</span><span class="hl-7">unknown</span><span class="hl-1">&gt;, </span><span class="hl-4">next</span><span class="hl-1">: </span><span class="hl-7">HttpHandler</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">request</span><span class="hl-1"> = </span><span class="hl-4">request</span><span class="hl-1">.</span><span class="hl-0">clone</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-4">params:</span><span class="hl-1"> </span><span class="hl-4">request</span><span class="hl-1">.</span><span class="hl-4">params</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-2">&#39;k&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;v&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      });</span><br/><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Request after interception&#39;</span><span class="hl-1">, </span><span class="hl-4">request</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">next</span><span class="hl-1">.</span><span class="hl-0">handle</span><span class="hl-1">(</span><span class="hl-4">request</span><span class="hl-1">).</span><span class="hl-0">pipe</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-0">tap</span><span class="hl-1">(</span><span class="hl-4">response</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1"> === </span><span class="hl-4">HttpEventType</span><span class="hl-1">.</span><span class="hl-4">Response</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Response after interception&#39;</span><span class="hl-1">, </span><span class="hl-4">response</span><span class="hl-1">)</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">]);</span>
</code><button>Copy</button></pre>
<p>Although interceptors are capable of modifying requests and responses, the <code>HttpRequest</code> and <code>HttpResponse</code> instance properties are <code>readonly</code>, rendering them largely immutable.</p>
<blockquote>
<p>They are immutable for a good reason: an app might retry a request several times before it succeeds, which means that the interceptor chain can re-process the same request multiple times.
If an interceptor could modify the original request object, the re-tried operation would start from the modified request rather than the original.
Immutability ensures that interceptors see the same request for each try.</p>
</blockquote>
<p>If you must alter a request, clone it first and modify the clone before passing it to <code>next.handle()</code>.</p>
<a id="md:replace-http-backend-class" class="tsd-anchor"></a><h2><a href="#md:replace-http-backend-class">Replace HTTP backend class</a></h2><p><code>@ngify/http</code> has the following HTTP backends built in:</p>
<table>
<thead>
<tr>
<th>HTTP backend class</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>HttpXhrBackend</code></td>
<td>HTTP requests using <code>XMLHttpRequest</code></td>
</tr>
<tr>
<td><code>HttpFetchBackend</code></td>
<td>HTTP requests using <code>Fetch API</code></td>
</tr>
<tr>
<td><code>HttpWxBackend</code></td>
<td>HTTP request in <code>WeChatMiniProgram</code></td>
</tr>
</tbody></table>
<p>By default, <code>HttpXhrBackend</code> is used, and you can switch to other HTTP backend class by modifying the configuration:</p>
<pre><code class="language-ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">setupConfig</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ngify/http&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HttpFetchBackend</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ngify/http/fetch&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HttpWxBackend</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ngify/http/wx&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">setupConfig</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">backend:</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HttpFetchBackend</span><span class="hl-1">()</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<p>You can also use a custom <code>HttpBackend</code> implementation class:</p>
<pre><code class="language-ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HttpBackend</span><span class="hl-1">, </span><span class="hl-4">HttpClient</span><span class="hl-1">, </span><span class="hl-4">HttpRequest</span><span class="hl-1">, </span><span class="hl-4">HttpEvent</span><span class="hl-1">, </span><span class="hl-4">setupConfig</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ngify/http&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Observable</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;rxjs&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-9">// You need to implement the HttpBackend interface</span><br/><span class="hl-5">class</span><span class="hl-1"> </span><span class="hl-7">CustomHttpBackend</span><span class="hl-1"> </span><span class="hl-5">implements</span><span class="hl-1"> </span><span class="hl-7">HttpBackend</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">handle</span><span class="hl-1">(</span><span class="hl-4">request</span><span class="hl-1">: </span><span class="hl-7">HttpRequest</span><span class="hl-1">&lt;</span><span class="hl-7">any</span><span class="hl-1">&gt;): </span><span class="hl-7">Observable</span><span class="hl-1">&lt;</span><span class="hl-7">HttpEvent</span><span class="hl-1">&lt;</span><span class="hl-7">any</span><span class="hl-1">&gt;&gt; {</span><br/><span class="hl-1">    </span><span class="hl-9">// ...</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">setupConfig</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">backend:</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">CustomHttpBackend</span><span class="hl-1">()</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<p>If you need to configure <code>HttpBackend</code> separately for a <code>HttpClient</code>, you can pass it in the <code>HttpClient</code> constructor:</p>
<pre><code class="language-ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">http</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HttpClient</span><span class="hl-1">(</span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">CustomHttpBackend</span><span class="hl-1">());</span><br/><br/><span class="hl-9">// Or</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">http</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HttpClient</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">interceptors:</span><span class="hl-1"> [</span><span class="hl-9">/* Some interceptors */</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-4">backend:</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">CustomHttpBackend</span><span class="hl-1">()</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<a id="md:use-in-nodejs" class="tsd-anchor"></a><h2><a href="#md:use-in-nodejs">Use in Node.js</a></h2><p><code>@ngify/http</code> uses the browser implementation of <code>XMLHttpRequest</code> by default. To use it in Node.js, you need to switch to the <code>Fetch API</code></p>
<pre><code class="language-ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">setupConfig</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ngify/http&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HttpFetchBackend</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ngify/http/fetch&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">setupConfig</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">backend:</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HttpFetchBackend</span><span class="hl-1">()</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<a id="md:pass-extra-parameters" class="tsd-anchor"></a><h2><a href="#md:pass-extra-parameters">Pass extra parameters</a></h2><p>In order to keep the API uniform, some extra parameters need to be passed through <code>HttpContext</code>.</p>
<a id="md:extra-parameters-for-fetch-api" class="tsd-anchor"></a><h3><a href="#md:extra-parameters-for-fetch-api">Extra parameters for Fetch API</a></h3><pre><code class="language-ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HttpContext</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ngify/http&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">FETCH_TOKEN</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ngify/http/fetch&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-9">// ...</span><br/><br/><span class="hl-9">// Fetch API allows cross-origin requests</span><br/><span class="hl-4">http</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;url&#39;</span><span class="hl-1">, </span><span class="hl-5">null</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">context:</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HttpContext</span><span class="hl-1">().</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-6">FETCH_TOKEN</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-4">mode:</span><span class="hl-1"> </span><span class="hl-2">&#39;cors&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">// ...</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<a id="md:extra-parameters-for-wechatminiprogram" class="tsd-anchor"></a><h3><a href="#md:extra-parameters-for-wechatminiprogram">Extra parameters for WeChatMiniProgram</a></h3><pre><code class="language-ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HttpContext</span><span class="hl-1">, </span><span class="hl-4">WX_UPLOAD_FILE_TOKEN</span><span class="hl-1">, </span><span class="hl-4">WX_DOWNLOAD_FILE_TOKEN</span><span class="hl-1">, </span><span class="hl-4">WX_REQUSET_TOKEN</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@ngify/http/wx&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-9">// ...</span><br/><br/><span class="hl-9">// WeChatMiniProgram enables HTTP2</span><br/><span class="hl-4">http</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;url&#39;</span><span class="hl-1">, </span><span class="hl-5">null</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">context:</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HttpContext</span><span class="hl-1">().</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-6">WX_REQUSET_TOKEN</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-4">enableHttp2:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-9">// WeChatMiniProgram file upload</span><br/><span class="hl-4">http</span><span class="hl-1">.</span><span class="hl-0">post</span><span class="hl-1">(</span><span class="hl-2">&#39;url&#39;</span><span class="hl-1">, </span><span class="hl-5">null</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">context:</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HttpContext</span><span class="hl-1">().</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-6">WX_UPLOAD_FILE_TOKEN</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-4">filePath:</span><span class="hl-1"> </span><span class="hl-2">&#39;filePath&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">fileName:</span><span class="hl-1"> </span><span class="hl-2">&#39;fileName&#39;</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-9">// WeChatMiniProgram file download</span><br/><span class="hl-4">http</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&#39;url&#39;</span><span class="hl-1">, </span><span class="hl-5">null</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">context:</span><span class="hl-1"> </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HttpContext</span><span class="hl-1">().</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-6">WX_DOWNLOAD_FILE_TOKEN</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-4">filePath:</span><span class="hl-1"> </span><span class="hl-2">&#39;filePath&#39;</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<a id="md:more" class="tsd-anchor"></a><h2><a href="#md:more">More</a></h2><p>For more usage, please visit <a href="https://angular.io/guide/http">https://angular.io</a>.</p>
</section><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><h3 class="tsd-index-heading uppercase">Index</h3><section class="tsd-index-section"><h3 class="tsd-index-heading">Classes</h3><div class="tsd-index-list"><a href="../classes/_ngify_http_wx.HttpWxBackend.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-128"></use></svg><span>Http<wbr/>Wx<wbr/>Backend</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Variables</h3><div class="tsd-index-list"><a href="../variables/_ngify_http_wx.WX_DOWNLOAD_FILE_TOKEN.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-32"></use></svg><span>WX_<wbr/>DOWNLOAD_<wbr/>FILE_<wbr/>TOKEN</span></a>
<a href="../variables/_ngify_http_wx.WX_REQUSET_TOKEN.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-32"></use></svg><span>WX_<wbr/>REQUSET_<wbr/>TOKEN</span></a>
<a href="../variables/_ngify_http_wx.WX_UPLOAD_FILE_TOKEN.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-32"></use></svg><span>WX_<wbr/>UPLOAD_<wbr/>FILE_<wbr/>TOKEN</span></a>
</div></section></section></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:ngifyhttp"><span>@ngify/http</span></a><ul><li><a href="#md:prerequisites"><span>Prerequisites</span></a></li><li><a href="#md:api"><span>API</span></a></li><li><a href="#md:install"><span>Install</span></a></li><li><a href="#md:basic-usage"><span>Basic usage</span></a></li><li><a href="#md:intercepting-requests-and-responses"><span>Intercepting requests and responses</span></a></li><li><a href="#md:replace-http-backend-class"><span>Replace HTTP backend class</span></a></li><li><a href="#md:use-in-nodejs"><span>Use in <wbr/>Node.js</span></a></li><li><a href="#md:pass-extra-parameters"><span>Pass extra parameters</span></a></li><li><ul><li><a href="#md:extra-parameters-for-fetch-api"><span>Extra parameters for <wbr/>Fetch API</span></a></li><li><a href="#md:extra-parameters-for-wechatminiprogram"><span>Extra parameters for <wbr/>We<wbr/>Chat<wbr/>Mini<wbr/>Program</span></a></li></ul></li><li><a href="#md:more"><span>More</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../index.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>ngify</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>